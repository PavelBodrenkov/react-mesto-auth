{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","utils/api.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeleteCardPopup.js","components/mainAuth.js","components/Register.js","components/Login.js","components/ProtectedRoute.js","components/ErrorPopup.js","components/DonePopup.js","components/Burger.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","userEmail","setLogged","setUserEmail","setBurgerHidden","location","useLocation","history","useHistory","currentPath","pathname","useState","toggle","setToggle","className","src","logo","alt","search","to","onClick","localStorage","removeItem","push","currentState","console","log","ProfileContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","item","cardLikeButtonClassName","aria-label","type","name","link","length","Main","onEditProfile","onAddPlace","onEditAvatar","cardsContext","avatar","about","map","Footer","ImagePopup","isOpen","onClose","closeOver","useEffect","closeESC","evt","key","document","addEventListener","removeEventListener","api","address","token","this","_address","_token","fetch","headers","authorization","then","res","ok","json","Promise","reject","status","method","body","JSON","stringify","PopupWithForm","handleSubmit","nameForm","children","title","onSubmit","action","id","noValidate","EditProfilePopup","onUpdateUser","loading","profession","dataUser","setDataUser","handleChange","e","target","value","preventDefault","onChange","placeholder","minLength","maxLength","required","disabled","EditAvatarPopup","onUpdateAvatar","inputEl","useRef","current","ref","AddPlacePopup","point","photo","dataValue","setDataValue","hendleChange","DeleteCardPopup","BASE_URL","Register","openPopupDone","openPopupError","password","email","respons","catch","err","Login","hendleLogin","dataLogin","setDataLogin","data","setItem","ProtectedRoute","Component","component","props","loggedIn","ErrorPopup","registerMessage","DonePopup","doneRegMessage","Burger","burgerhidden","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isPhotoPopupOpen","setIsPhotoPopupOpen","selectedCard","setSelectedCard","setCurrentUser","cards","setCards","loadingCard","setLoadingCard","loadingProfile","setLoadingProfile","loadingAvatar","setLoadingAvatar","loadingDelete","setLoadingDelete","delPopup","setDelPopup","cardToDelete","setCardToDelete","setLoggedIn","setRegisterMessage","setDoneMessage","closeAllPopup","escClose","event","classList","contains","all","getInitialProfile","getInitialCards","usersData","getItem","mainAuth","tokenCheck","Provider","path","deleteLike","addLike","newCard","newCards","pathEditProfile","finally","addAvatar","postAddCard","deleteAddCard","delcard","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.1680800c.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","import React, { useState } from 'react';\r\nimport logo from './../images/logo.svg';\r\nimport {Link, useHistory, useLocation} from 'react-router-dom'\r\n\r\n\r\nfunction Header({ userEmail, setLogged, setUserEmail, setBurgerHidden }) {\r\n\r\n  const location = useLocation()\r\n  const history = useHistory()\r\n  const currentPath = location.pathname\r\n  const [toggle, setToggle] = useState(true)\r\n\r\n  function signOut() {\r\n    localStorage.removeItem('token')\r\n    history.push('/sign-up')\r\n    setLogged(false)\r\n    setUserEmail(\"\")\r\n  }\r\n\r\n  function toggleBurger() {\r\n    const currentState = toggle;\r\n    setToggle(!currentState);\r\n    setBurgerHidden(currentState)\r\n    console.log(toggle)\r\n  }\r\n\r\n  return (\r\n    <header className=\"header line\">\r\n      <img src={logo} alt=\"логотип\" className=\"header__logo\" />\r\n      <Link className={currentPath.search('/sign-in') ? \"hidden\" : \"header__login\"} to={'/sign-up'} >Регистрация</Link>\r\n      <Link className={currentPath.search('/sign-up') ? \"hidden\" : \"header__login\"} to={'/sign-in'} >Войти</Link>\r\n      <div className={currentPath.search('/main') ? \"hidden\" : \"header__exit\"}>\r\n        <div className=\"user-data\">{userEmail}</div>\r\n        <Link onClick={signOut} to={'/main'} className=\"header__login\">Выйти</Link>\r\n      </div>\r\n      <div className={currentPath.search('/main') ? \"hidden\" : \"burger__open\"}>\r\n        <div onClick={toggleBurger} className={`header__burger-menu ${toggle ? '' : 'active'}`}>\r\n          <span></span>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n\r\n\r\nexport default Header","import React from \"react\"; \r\n \r\nexport const ProfileContext = React.createContext();\r\n","import React from \"react\";\r\nimport { ProfileContext } from \"./../contexts/CurrentUserContext\";\r\n\r\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n  const currentUser = React.useContext(ProfileContext);\r\n\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const cardDeleteButtonClassName = `button button_type_delete ${isOwn ? \"button_type_delete\" : \"button_type_delete-hidden\"\r\n    }`;\r\n\r\n  const isLiked = card.likes.some((item) => item._id === currentUser._id);\r\n  const cardLikeButtonClassName = `button button_type_like ${isLiked ? \"button_type_like_active\" : \"button_type_like\"\r\n    }`;\r\n\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(card);\r\n  }\r\n\r\n  return (\r\n    <article className=\"element\">\r\n      <button\r\n        onClick={handleDeleteClick}\r\n        aria-label=\"Удалить\"\r\n        className={cardDeleteButtonClassName}\r\n        type=\"button\"\r\n      ></button>\r\n      <button onClick={handleClick} className=\"button button_type_photo\">\r\n        <img className=\"element__photo\" alt={card.name} src={card.link} />\r\n      </button>\r\n      <div className=\"element__position\">\r\n        <h3 className=\"element__subtitle\">{card.name}</h3>\r\n        <div>\r\n          <button\r\n            onClick={handleLikeClick}\r\n            aria-label=\"Поставить_лайк\"\r\n            className={cardLikeButtonClassName}\r\n            type=\"button\"\r\n          ></button>\r\n          <div className=\"element__counter_like\">{card.likes.length}</div>\r\n        </div>\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import React from \"react\";\r\nimport Card from \"./Card.js\";\r\nimport { ProfileContext } from \"./../contexts/CurrentUserContext\";\r\n\r\nfunction Main({\r\n  onCardClick,\r\n  onCardLike,\r\n  onCardDelete,\r\n  onEditProfile,\r\n  onAddPlace,\r\n  onEditAvatar,\r\n  cardsContext\r\n}) {\r\n  const currentUser = React.useContext(ProfileContext);\r\n  return (\r\n    <div className=\"conteiner\">\r\n      <main className=\"main\">\r\n        <section className=\"profile\">\r\n          <div onClick={onEditAvatar} className=\"profile__avatar-container\">\r\n            <img\r\n              src={currentUser.avatar}\r\n              alt={currentUser.name}\r\n              className=\"profile__avatar\"\r\n            />\r\n          </div>\r\n          <div className=\"profile__info\">\r\n            <div className=\"profile__edit\">\r\n              <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n              <button\r\n                onClick={onEditProfile}\r\n                aria-label=\"Редактировать_профиль\"\r\n                className=\"button button_type_edit\"\r\n                type=\"button\"\r\n              ></button>\r\n            </div>\r\n            <p className=\"profile__subtitle\">{currentUser.about}</p>\r\n          </div>\r\n          <button\r\n            onClick={onAddPlace}\r\n            aria-label=\"Добавить_фото\"\r\n            className=\"button button_type_add-card\"\r\n            type=\"button\"\r\n          ></button>\r\n        </section>\r\n        <section className=\"elements\">\r\n          <div className=\"elements__content\">\r\n            {cardsContext.map((item) => {\r\n              return (\r\n                <Card\r\n                  card={item}\r\n                  onCardClick={onCardClick}\r\n                  key={item._id}\r\n                  onCardLike={onCardLike}\r\n                  onCardDelete={onCardDelete}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        </section>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\nfunction Footer() {\r\n    return (\r\n        <div className=\"conteiner\">\r\n            <footer className=\"footer\">\r\n                <p className=\"footer__subtitle\">© 2020 Mesto Russia</p>\r\n            </footer>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Footer","import React from \"react\";\r\nimport { useEffect } from \"react\";\r\n\r\nfunction ImagePopup({ isOpen, onClose, closeOver, card }) {\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    const closeESC = (evt) => {\r\n      if (evt.key === \"Escape\") {\r\n        onClose();\r\n      }\r\n    };\r\n    document.addEventListener(\"keydown\", closeESC);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", closeESC);\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  return (\r\n    <div\r\n      className={`popup popup_type_photo ${isOpen && \"popup_opened\"}`}\r\n      onClick={closeOver}\r\n    >\r\n      <figure className=\"popup__big\">\r\n        <button\r\n          onClick={onClose}\r\n          aria-label=\"Закрыть_попап\"\r\n          className=\"button button_type_close button_type_big-close\"\r\n          type=\"button\"\r\n        ></button>\r\n        <img className=\"popup__big-photo\" alt=\"Фото\" src={`${card.link}`} />\r\n        <figcaption className=\"popup__big-title\">{`${card.name}`}</figcaption>\r\n      </figure>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;\r\n"," class Api {\r\n  constructor({ address, token }) {\r\n    this._address = address\r\n    this._token = token\r\n  }\r\n\r\n  // выгрузить карточки с сервера\r\n  getInitialCards() {\r\n    return fetch(`${this._address}/cards`, {\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\r\n  }\r\n\r\n  //Выгрузить данные профиля с сервера\r\n  getInitialProfile() {\r\n    return fetch(`${this._address}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\r\n  }\r\n\r\n  //Редактирование данных профиля\r\n  pathEditProfile(item) {\r\n    return fetch(`${this._address}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: item.name,\r\n        about: item.about\r\n      })\r\n    })\r\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\r\n  }\r\n\r\n  //добавить карточку\r\n  postAddCard(item) {\r\n    return fetch(`${this._address}/cards`, {\r\n      method: 'POST',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: item.name,\r\n        link: item.link\r\n      })\r\n    })\r\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\r\n  }\r\n\r\n  //Удалить карточку\r\n  deleteAddCard(item) {\r\n    return fetch(`${this._address}/cards/${item}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\r\n  }\r\n\r\n  //Обновление аватара\r\n  addAvatar(item) {\r\n    return fetch(`${this._address}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: item.avatar\r\n      })\r\n    })\r\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\r\n  }\r\n\r\n  addLike(item) {\r\n    return fetch(`${this._address}/cards/likes/${item}`, {\r\n      method: 'PUT',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\r\n  }\r\n\r\n  deleteLike(item) {\r\n    return fetch(`${this._address}/cards/likes/${item}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\r\n  }\r\n}\r\n\r\nconst config = {\r\n  address:'https://mesto.nomoreparties.co/v1/cohort-19',\r\n  token:'175e5d69-964d-4046-a547-a053671ab7db'\r\n}\r\n\r\nconst api = new Api (config);\r\n\r\nexport default api;\r\n","import React, { useEffect } from \"react\";\r\n\r\nfunction PopupWithForm({\r\n  isOpen,\r\n  onClose,\r\n  name,\r\n  closeOver,\r\n  handleSubmit,\r\n  nameForm,\r\n  children,\r\n  title\r\n}) {\r\n  \r\n  return (\r\n    <div\r\n      className={`popup popup_type_${name} ${isOpen && \"popup_opened\"}`}\r\n      onClick={closeOver}\r\n    >\r\n      <div className=\"popup__conteiner\">\r\n        <form\r\n          onSubmit={handleSubmit}\r\n          action=\"#\"\r\n          id=\"form_reset\"\r\n          className={`form form_type_${nameForm}`}\r\n          name={`popup-${name}`}\r\n          noValidate\r\n        >\r\n          <h2 className=\"popup__title\">{title}</h2>\r\n          {children}\r\n        </form>\r\n        <button\r\n          onClick={onClose}\r\n          aria-label=\"Закрыть_попап\"\r\n          className=\"button button_type_close\"\r\n          type=\"button\"\r\n        ></button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React, { useEffect, useState } from \"react\"; \r\nimport PopupWithForm from \"./PopupWithForm.js\"; \r\nimport { ProfileContext } from \"./../contexts/CurrentUserContext\"; \r\n \r\nfunction EditProfilePopup({ \r\n  isOpen, \r\n  onClose, \r\n  closeOver, \r\n  onUpdateUser, \r\n  loading \r\n}) { \r\n  const currentUser = React.useContext(ProfileContext); \r\n  const [dataUser, setDataUser] = useState({ \r\n    name: \"\", \r\n    profession: \"\" \r\n  }); \r\n \r\n  useEffect(() => { \r\n    setDataUser({ \r\n      name: currentUser.name, \r\n      profession: currentUser.about \r\n    }); \r\n  }, [currentUser]); \r\n \r\n  function handleChange(e) { \r\n    const { name, value } = e.target; \r\n    setDataUser({ ...dataUser, [name]: value }); \r\n  } \r\n \r\n  function handleSubmit(e) { \r\n    e.preventDefault(); \r\n    onUpdateUser({ \r\n      name: dataUser.name, \r\n      about: dataUser.profession \r\n    }); \r\n  } \r\n \r\n  return ( \r\n    <PopupWithForm \r\n      isOpen={isOpen} \r\n      onClose={onClose} \r\n      closeOver={closeOver} \r\n      handleSubmit={handleSubmit} \r\n      name=\"edit\" \r\n      title=\"Редактировать профиль\" \r\n      nameForm=\"edit\" \r\n    > \r\n      <input \r\n        onChange={handleChange} \r\n        value={dataUser.name} \r\n        id=\"text-input\" \r\n        className=\"popup__data popup__data_type_name\" \r\n        type=\"text\" \r\n        placeholder=\"Имя\" \r\n        name=\"name\" \r\n        minLength=\"2\" \r\n        maxLength=\"40\" \r\n        required \r\n      /> \r\n      <span id=\"text-input-error\" className=\"popup__data-error\"></span> \r\n      <input \r\n        onChange={handleChange} \r\n        value={dataUser.profession} \r\n        id=\"subtext-input\" \r\n        className=\"popup__data popup__data_type_job\" \r\n        type=\"text\" \r\n        placeholder=\"Вид деятельности\" \r\n        name=\"profession\" \r\n        minLength=\"2\" \r\n        maxLength=\"200\" \r\n        required \r\n      /> \r\n      <span id=\"subtext-input-error\" className=\"popup__data-error\"></span> \r\n      <button \r\n        className={`button button_type_save button_type_save-edit ${ \r\n          loading ? \"button_type_disabled\" : \"button_type_save\" \r\n        }`} \r\n        type=\"submit\" \r\n        name=\"button\" \r\n        value=\"Сохранить\" \r\n        disabled={loading ? true : false} \r\n      > \r\n        {loading ? \"Сохранение...\" : \"Сохранить\"} \r\n      </button> \r\n    </PopupWithForm> \r\n  ); \r\n} \r\n \r\nexport default EditProfilePopup; \r\n","import React, { useEffect, useRef } from \"react\"; \r\nimport PopupWithForm from \"./PopupWithForm.js\"; \r\n \r\nfunction EditAvatarPopup({ \r\n  isOpen, \r\n  onClose, \r\n  closeOver, \r\n  name, \r\n  title, \r\n  onUpdateAvatar, \r\n  loading \r\n}) { \r\n  const inputEl = useRef(null); \r\n \r\n  function handleSubmit(e) { \r\n    e.preventDefault(); \r\n    onUpdateAvatar({ \r\n      avatar: inputEl.current.value \r\n    }); \r\n  } \r\n \r\n  useEffect(() => { \r\n    if (!isOpen) { \r\n      inputEl.current.value = \"\"; \r\n    } \r\n  }, [isOpen]); \r\n \r\n  return ( \r\n    <PopupWithForm \r\n      isOpen={isOpen} \r\n      onClose={onClose} \r\n      closeOver={closeOver} \r\n      name={name} \r\n      title={title} \r\n      handleSubmit={handleSubmit} \r\n      nameForm=\"avatar\" \r\n    > \r\n      <input \r\n        ref={inputEl} \r\n        id=\"avatar-input\" \r\n        className=\"popup__data popup__data_photo\" \r\n        type=\"url\" \r\n        name=\"photoAvatar\" \r\n        placeholder=\"Ссылка на картинку\" \r\n        required \r\n      /> \r\n      <span id=\"avatar-input-error\" className=\"popup__data-error\"></span> \r\n      <button \r\n        className={`button button_type_save button_type_save-profile ${ \r\n          loading ? \"button_type_disabled\" : \"button_type_save\" \r\n        }`} \r\n        type=\"submit\" \r\n        name=\"button\" \r\n        value=\"Сохранить\" \r\n        disabled={loading ? true : false} \r\n      > \r\n        {loading ? \"Сохранение...\" : \"Сохранить\"} \r\n      </button> \r\n    </PopupWithForm> \r\n  ); \r\n} \r\n \r\nexport default EditAvatarPopup;\r\n","import { React, useEffect, useRef, useState } from \"react\"; \r\nimport PopupWithForm from \"./PopupWithForm.js\"; \r\n \r\nfunction AddPlacePopup({ \r\n  isOpen, \r\n  onClose, \r\n  closeOver, \r\n  name, \r\n  title, \r\n  onAddPlace, \r\n  loading \r\n}) { \r\n   \r\n  const [dataValue, setDataValue] = useState({ \r\n    point: '', \r\n    photo: '' \r\n  }) \r\n \r\n  function hendleChange (e) { \r\n    const {name, value} = e.target \r\n    setDataValue({...dataValue, [name]:value}) \r\n  } \r\n \r\n  function handleSubmit(e) { \r\n    e.preventDefault(); \r\n    onAddPlace({ \r\n      name: dataValue.point, \r\n      link: dataValue.photo \r\n    }); \r\n  } \r\n \r\n  useEffect(() => { \r\n    if (!isOpen) { \r\n      dataValue.point = \"\"; \r\n      dataValue.photo = \"\"; \r\n    } \r\n  }, [isOpen]); \r\n \r\n  return ( \r\n    <PopupWithForm \r\n      isOpen={isOpen} \r\n      onClose={onClose} \r\n      closeOver={closeOver} \r\n      name={name} \r\n      title={title} \r\n      handleSubmit={handleSubmit} \r\n      nameForm=\"photo\" \r\n    > \r\n      <input \r\n        //  \r\n        onChange={hendleChange} \r\n        id=\"photo-input\" \r\n        className=\"popup__data popup__data_photo popup__data_type_location\" \r\n        type=\"text\" \r\n        name=\"point\" \r\n        placeholder=\"Название\" \r\n        minLength=\"2\" \r\n        maxLength=\"30\" \r\n        required \r\n        value={dataValue.point} \r\n      /> \r\n      <span id=\"photo-input-error\" className=\"popup__data-error\"></span> \r\n      <input \r\n        // ref={linkCurrent} \r\n        onChange={hendleChange} \r\n        id=\"url-input\" \r\n        className=\"popup__data popup__data_photo popup__data_type_link\" \r\n        type=\"url\" \r\n        name=\"photo\" \r\n        placeholder=\"Ссылка на картинку\" \r\n        required \r\n        value={dataValue.photo} \r\n      /> \r\n      <span id=\"url-input-error\" className=\"popup__data-error\"></span> \r\n      <button \r\n        className={`button button_type_save button_type_save-add ${ \r\n          loading ? \"button_type_disabled\" : \"button_type_save\" \r\n        }`} \r\n        type=\"submit\" \r\n        name=\"button\" \r\n        value=\"Создать\" \r\n        disabled={loading ? true : false} \r\n      > \r\n        {loading ? \"Сохранение...\" : \"Создать\"} \r\n      </button> \r\n    </PopupWithForm> \r\n  ); \r\n} \r\n \r\nexport default AddPlacePopup; ","import React from \"react\"; \r\nimport PopupWithForm from \"./PopupWithForm.js\"; \r\nfunction DeleteCardPopup({ \r\n  isOpen, \r\n  onCardDelete, \r\n  onClose, \r\n  name, \r\n  closeOver, \r\n  loading \r\n}) { \r\n  function handleSubmit(e) { \r\n    e.preventDefault(); \r\n    onCardDelete(); \r\n  } \r\n \r\n  return ( \r\n    <PopupWithForm \r\n      isOpen={isOpen} \r\n      handleSubmit={handleSubmit} \r\n      onClose={onClose} \r\n      name={name} \r\n      closeOver={closeOver} \r\n      nameForm=\"delete\" \r\n    > \r\n      <h2 className=\"popup__title popup__title_type_photo\">Вы уверены ?</h2> \r\n      <button \r\n        className={`button button_type_save ${ \r\n          loading ? \"button_type_disabled\" : \"button_type_save\" \r\n        }`} \r\n        type=\"submit\" \r\n        name=\"button\" \r\n        value=\"yes\" \r\n        disabled={loading ? true : false} \r\n      > \r\n        {loading ? \"Удаление...\" : \"Да\"} \r\n      </button> \r\n    </PopupWithForm> \r\n  ); \r\n} \r\n \r\nexport default DeleteCardPopup; \r\n","export const BASE_URL = 'https://auth.nomoreparties.co';\r\n\r\nexport const register = (password, email) => {\r\n    return fetch(`${BASE_URL}/signup`, {\r\n        method: 'POST',\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({ password, email })\r\n    })\r\n        .then((respons) => {\r\n\r\n            console.log(respons)\r\n            try {\r\n                if (respons.status === 201) {\r\n                    return respons.json()\r\n                }\r\n            } catch (e) {\r\n                return (e)\r\n            }\r\n        })\r\n        .then((res) => {\r\n            return res;\r\n        })\r\n};\r\n\r\nexport const login = (password, email) => {\r\n    return fetch(`${BASE_URL}/signin`, {\r\n        method: 'POST',\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ password, email })\r\n    })\r\n    .then(res => res.json())\r\n        .then((data) => {\r\n            console.log(data)\r\n            localStorage.setItem('token', data.token)\r\n            return data\r\n        })\r\n};\r\n\r\nexport const getContent = (token) => {\r\n    return fetch(`${BASE_URL}/users/me`, {\r\n        method: \"GET\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"Authorization\": `Bearer ${token}`\r\n        }\r\n    })\r\n        .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\r\n        .then(data => data)\r\n}","import React, { useState } from 'react';\r\nimport {Link, useHistory} from 'react-router-dom';\r\nimport * as mainAuth from '../components/mainAuth';\r\n\r\n\r\n\r\nfunction Register({openPopupDone, openPopupError}) {\r\n  const [dataUser, setDataUser] = useState({\r\n    password:'',\r\n    email:''\r\n  })\r\n  const history = useHistory()\r\n  \r\n  function hendleChange(e) {\r\n    const {name, value} = e.target\r\n    setDataUser({...dataUser, [name]: value});\r\n    console.log(e.target.value)\r\n  }\r\n\r\n  function hendleSubmit(e) {\r\n    e.preventDefault() \r\n    mainAuth.register(dataUser.password, dataUser.email).then((res) => {\r\n      console.log(res)\r\n        if(res) {\r\n          openPopupDone()\r\n          history.push('/sign-in')\r\n        }else {\r\n          openPopupError()\r\n        }\r\n    })\r\n    .catch((err) => console.log(err))\r\n  }\r\n\r\n    return(\r\n      <div className=\"register\">\r\n      <div className=\"register__container\">\r\n        <form onSubmit={hendleSubmit} action=\"#\" id=\"form_reset\" className=\"register__form\" name noValidate>\r\n          <div>\r\n          <h2 className=\"register__title\">Регистрация</h2>\r\n          <input onChange={hendleChange} className=\"register__input\" type=\"email\" name=\"email\" placeholder=\"Email\" value={dataUser.email}></input>\r\n          <input onChange={hendleChange} className=\"register__input\" type=\"password\" name=\"password\" placeholder=\"Пароль\" value={dataUser.password}></input>\r\n          </div>\r\n          <div className=\"register_type_button-container\">\r\n          <button className=\" button button_type_register\">Зарегистрироваться</button>\r\n          <Link to={'/sign-in'} className=\"register__login\">Уже зарегистрированы? Войти</Link>\r\n          </div>\r\n        </form>\r\n        </div>\r\n    </div>\r\n    )\r\n\r\n}\r\n\r\nexport default Register","import React, { useState } from 'react'\r\nimport * as mainAuth from '../components/mainAuth';\r\nimport {useHistory} from 'react-router-dom'\r\n\r\nfunction Login({ hendleLogin, openPopupError }) {\r\n  const [dataLogin, setDataLogin] = useState({\r\n    password: '',\r\n    email: ''\r\n  })\r\n\r\n  const history = useHistory()\r\n\r\n  function hendleChange(e) {\r\n    const { name, value } = e.target\r\n    setDataLogin({ ...dataLogin, [name]: value })\r\n  }\r\n\r\n  function hendleSubmit(e) {\r\n    e.preventDefault()\r\n    mainAuth.login(dataLogin.password, dataLogin.email).then((data) => {\r\n      console.log(data)\r\n      if (data.token) {\r\n        hendleLogin()\r\n        setDataLogin({ password: '', email: '' })\r\n        \r\n        history.push('/main')\r\n      } else {\r\n        openPopupError()\r\n      }\r\n    })\r\n      .catch((err) => console.log(err))\r\n  }\r\n\r\n  return (\r\n    <div className=\"register\">\r\n      <div className=\"register__container\">\r\n        <form onSubmit={hendleSubmit} action=\"#\" id=\"form_reset\" className=\"register__form\" name noValidate>\r\n          <div>\r\n            <h2 className=\"register__title\">Вход</h2>\r\n            <input onChange={hendleChange} className=\"register__input\" type=\"email\" name=\"email\" placeholder=\"Email\" required></input>\r\n            <input onChange={hendleChange} className=\"register__input\" type=\"password\" name=\"password\" placeholder=\"Пароль\" required></input>\r\n          </div>\r\n          <div className=\"register_type_button-container\">\r\n            <button type=\"submit\" className=\"button button_type_register\">Войти</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default Login","import React, { Component } from \"react\";\r\nimport {Route, Redirect} from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({component: Component, ...props}) => {\r\n    return (\r\n        <Route>\r\n            {() =>\r\n                props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\r\n            }\r\n        </Route>\r\n    )\r\n}\r\n\r\nexport default ProtectedRoute","import React from \"react\";\r\n\r\nfunction ErrorPopup({registerMessage, onClose, closeOver}) {\r\n\r\n    return(\r\n        <div onClick={closeOver} className={`error-popup popup ${registerMessage && \"popup_opened\"}`}>\r\n            <ul className=\"error-popup__lists\">\r\n                <li className=\"error-popup__images\"></li>\r\n                <li className=\"error-popup__title\">Что-то пошло не так!Попробуйте ещё раз.</li>\r\n                <button onClick={onClose} className=\"button button_type_close button_type_error\" type=\"button\"></button>\r\n            </ul>\r\n        </div>\r\n    )\r\n    \r\n}\r\n\r\nexport default ErrorPopup","import React from \"react\"\r\n\r\nfunction DonePopup({ doneRegMessage, onClose, closeOver }) {\r\n\r\n    return (\r\n        <div onClick={closeOver} className={`error-popup popup ${doneRegMessage && \"popup_opened\"}`}>\r\n            <ul className=\"error-popup__lists\">\r\n                <li className=\"done-popup__images\"></li>\r\n                <li className=\"error-popup__title\">Вы успешно зарегистрировались!</li>\r\n                <button onClick={onClose} className=\"button button_type_close button_type_error\" type=\"button\"></button>\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DonePopup","import React from 'react'\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\n\r\n\r\nfunction Burger({ userEmail, setUserEmail, setLogged, burgerhidden }) {\r\n\r\n    const location = useLocation()\r\n    const history = useHistory()\r\n    \r\n\r\n    function signOut() {\r\n        localStorage.removeItem('token')\r\n        history.push('/sign-up')\r\n        setLogged(false)\r\n        setUserEmail(\"\")\r\n    }\r\n\r\n    return (\r\n        <div className={`burger_container ${burgerhidden ? 'burger__open' : ''}`}>\r\n            <div className={`header__burger ${burgerhidden ? 'burger__open' : ''}`}>\r\n                <div className=\"user-data\">{userEmail}</div>\r\n                <Link onClick={signOut} to={'/main'} className=\"header__login\">Выйти</Link>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Burger","import React from \"react\";\r\nimport Header from \"./Header\";\r\nimport Main from \"./Main\";\r\nimport Footer from \"./Footer\";\r\nimport ImagePopup from \"./ImagePopup\";\r\nimport { useEffect, useState } from \"react\";\r\nimport api from \"../utils/api\";\r\nimport { ProfileContext } from \"./../contexts/CurrentUserContext\";\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup\";\r\nimport AddPlacePopup from \"./AddPlacePopup\";\r\nimport DeleteCardPopup from \"./DeleteCardPopup\";\r\nimport Register from './Register';\r\nimport { Route, Switch, Redirect, useHistory } from \"react-router-dom\";\r\nimport Login from './Login';\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\nimport * as mainAuth from \"../components/mainAuth\";\r\nimport ErrorPopup from \"./ErrorPopup\";\r\nimport DonePopup from \"./DonePopup\"\r\nimport Burger from \"./Burger\";\r\n\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isPhotoPopupOpen, setIsPhotoPopupOpen] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState({});\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [cards, setCards] = useState([]);\r\n  const [loadingCard, setLoadingCard] = useState(false);\r\n  const [loadingProfile, setLoadingProfile] = useState(false)\r\n  const [loadingAvatar, setLoadingAvatar] = useState(false)\r\n  const [loadingDelete, setLoadingDelete] = useState(false)\r\n  const [delPopup, setDelPopup] = useState(false);\r\n  const [cardToDelete, setCardToDelete] = useState({});\r\n  const [loggedIn, setLoggedIn] = useState(false)\r\n  const history = useHistory();\r\n  const [userEmail, setUserEmail] = useState([])\r\n  const [registerMessage, setRegisterMessage] = useState(false)\r\n  const [doneRegMessage, setDoneMessage] = useState(false)\r\n  const [burgerhidden, setBurgerHidden] = useState(\"\")\r\n\r\n  useEffect(() => {\r\n    Promise.all([api.getInitialProfile(), api.getInitialCards()])\r\n      .then(([usersData, cards]) => {\r\n        setCurrentUser(usersData);\r\n        setCards(cards);\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка: ${err}`);\r\n      });\r\n  }, []);\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some((item) => item._id === currentUser._id);\r\n    const likeRequest = isLiked ? api.deleteLike(card._id) : api.addLike(card._id)\r\n    likeRequest.then((newCard) => {\r\n      const newCards = cards.map((item) =>\r\n        item._id === card._id ? newCard : item\r\n      )\r\n      setCards(newCards);\r\n    })\r\n      .catch((err) => {\r\n        console.log(`Ошибка: ${err}`)\r\n      })\r\n  }\r\n\r\n  function hendleDeleteCard(card) {\r\n    setCardToDelete(card);\r\n    setDelPopup(true);\r\n  }\r\n\r\n  function handleCardDeleteSubmit() {\r\n    setLoadingDelete(true)\r\n    api\r\n      .deleteAddCard(cardToDelete._id)\r\n      .then(() => {\r\n        const delcard = cards.filter((item) => item._id !== cardToDelete._id);\r\n        setCards(delcard);\r\n        closeAllPopup();\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка: ${err}`);\r\n      })\r\n      .finally(() => {\r\n        setCardToDelete({});\r\n        setLoadingDelete(false)\r\n      });\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setIsPhotoPopupOpen(true);\r\n    setSelectedCard(card);\r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function openPopupError() {\r\n    setRegisterMessage(true)\r\n  }\r\n\r\n  function openPopupDone() {\r\n    setDoneMessage(true)\r\n  }\r\n\r\n  function closeAllPopup() {\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsPhotoPopupOpen(false);\r\n    setDelPopup(false);\r\n    setRegisterMessage(false);\r\n    setDoneMessage(false);\r\n  }\r\n\r\n  function escClose(event) {\r\n    if (event.target.classList.contains(\"popup_opened\")) {\r\n      closeAllPopup();\r\n    }\r\n  }\r\n\r\n  function handleUpdateUser({ name, about }) {\r\n    setLoadingProfile(true);\r\n    api\r\n      .pathEditProfile({ name: name, about: about })\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopup();\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка: ${err}`);\r\n      })\r\n      .finally(() => setLoadingProfile(false));\r\n  }\r\n\r\n  function handleUpdateAvatar({ avatar }) {\r\n    setLoadingAvatar(true);\r\n    api\r\n      .addAvatar({ avatar: avatar })\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopup();\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка: ${err}`);\r\n      })\r\n      .finally(() => setLoadingAvatar(false));\r\n  }\r\n\r\n  function handleAddPlaceSubmit({ name, link }) {\r\n    setLoadingCard(true);\r\n    api\r\n      .postAddCard({ name: name, link: link })\r\n      .then((res) => {\r\n        setCards([res, ...cards]);\r\n        if (res) {\r\n          closeAllPopup()\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка: ${err}`);\r\n      })\r\n      .finally(() => setLoadingCard(false));\r\n  }\r\n\r\n  useEffect(() => {\r\n    tokenCheck()\r\n  }, [loggedIn])\r\n\r\n  function hendleLogin() {\r\n    setLoggedIn(true)\r\n  }\r\n\r\n  function tokenCheck() {\r\n    if (localStorage.getItem(\"token\")) {\r\n      console.log(localStorage.getItem(\"token\"))\r\n      const token = localStorage.getItem(\"token\")\r\n      console.log(token)\r\n      if (token) {\r\n        mainAuth.getContent(token).then((res) => {\r\n          console.log(res)\r\n          if (res) {\r\n            setUserEmail(res.data.email)\r\n            history.push(\"/main\")\r\n            hendleLogin()\r\n            console.log(res.data.email)\r\n          }\r\n        })\r\n          .catch((err) => console.log(err))\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const closeESC = (evt) => {\r\n      if (evt.key === \"Escape\") {\r\n        closeAllPopup();\r\n      }\r\n    };\r\n    document.addEventListener(\"keydown\", closeESC);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", closeESC);\r\n    };\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <ProfileContext.Provider value={currentUser}>\r\n        <Burger userEmail={userEmail} setUserEmail={setUserEmail} setLogged={setLoggedIn} burgerhidden={burgerhidden} />\r\n        <Header userEmail={userEmail} setUserEmail={setUserEmail} setLogged={setLoggedIn} setBurgerHidden={setBurgerHidden} />\r\n        <Switch>\r\n          <ProtectedRoute\r\n            path=\"/main\"\r\n            loggedIn={loggedIn}\r\n            component={Main}\r\n            onEditProfile={handleEditProfileClick}\r\n            onAddPlace={handleAddPlaceClick}\r\n            onEditAvatar={handleEditAvatarClick}\r\n            onCardClick={handleCardClick}\r\n            onCardLike={handleCardLike}\r\n            onCardDelete={hendleDeleteCard}\r\n            cardsContext={cards}\r\n          />\r\n          <ProtectedRoute\r\n            path=\"/main\"\r\n            component={Footer}\r\n          />\r\n          <Route path=\"/sign-up\">\r\n            <Register openPopupDone={openPopupDone} openPopupError={openPopupError} />\r\n          </Route>\r\n          <Route path=\"/sign-in\">\r\n            <Login hendleLogin={hendleLogin} openPopupError={openPopupError} />\r\n          </Route>\r\n          <Route>\r\n            {loggedIn ? (\r\n              <Redirect to=\"/main\" />\r\n            ) : (\r\n                <Redirect to=\"/sign-in\" />\r\n              )\r\n            }\r\n          </Route>\r\n        </Switch>\r\n        <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={closeAllPopup}\r\n          closeOver={escClose}\r\n          onUpdateUser={handleUpdateUser}\r\n          loading={loadingProfile}\r\n        />\r\n        <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopup}\r\n          closeOver={escClose}\r\n          name=\"avatar\"\r\n          title=\"Обновить аватар\"\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n          loading={loadingAvatar}\r\n        />\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopup}\r\n          closeOver={escClose}\r\n          name=\"photo\"\r\n          title=\"Новое место\"\r\n          onAddPlace={handleAddPlaceSubmit}\r\n          loading={loadingCard}\r\n        />\r\n        <ImagePopup\r\n          card={selectedCard}\r\n          onClose={closeAllPopup}\r\n          isOpen={isPhotoPopupOpen}\r\n          closeOver={escClose}\r\n        />\r\n        <DeleteCardPopup\r\n          isOpen={delPopup}\r\n          name=\"delete\"\r\n          card={selectedCard}\r\n          onCardDelete={handleCardDeleteSubmit}\r\n          onClose={closeAllPopup}\r\n          closeOver={escClose}\r\n          loading={loadingDelete}\r\n        />\r\n        <ErrorPopup closeOver={escClose} onClose={closeAllPopup} registerMessage={registerMessage} />\r\n        <DonePopup closeOver={escClose} onClose={closeAllPopup} doneRegMessage={doneRegMessage} />\r\n      </ProfileContext.Provider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App.js';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport{BrowserRouter} from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}